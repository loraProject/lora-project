webpackJsonp([12],{"5Xle":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("vLgD"),a=s("6wmS"),o={components:{ElRow:s("DoGJ").a,ElCard:a.a},name:"UserManage",data:function(){return{allInfo:[],dialogFormVisible:!1,dialogLimitVisible:!1,passwdForm:{password:""},formLabelWidth:"120px",allUserNum:"",proportion:10,commonuser:"",username:"",value:"",classUser:[{label:"普通用户",value:"common"},{label:"管理员",value:"admin"},{label:"超级管理员",value:"editor"},{label:"游客",value:"visitor"}]}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;l.a.get("user/allUserInfo").then(function(t){e.allInfo=t.data.data.userInfo,e.allUserNum=t.data.data.userNum,e.proportion=e.allUserNum/100*100})},handleClick:function(e){console.log(e.userid)},getUseridPasswd:function(e){this.dialogFormVisible=!0,this.username=e.userid},getUseridLimit:function(e){this.dialogLimitVisible=!0,this.username=e.userid,console.log(e),console.log(this.username)},modifyPasswd:function(){var e=this,t=new URLSearchParams;t.append("modUserId",this.username),t.append("password",this.passwdForm.password),l.a.post("/user/modifyPassword",t).then(function(t){1===t.data.code?e.$alert("修改密码成功","修改密码",{confirmButtonText:"确定",callback:function(s){e.$message({type:"success",message:t.data.info})}}):e.$alert("修改密码失败","修改密码",{confirmButtonText:"确定",callback:function(s){e.$message({type:"error",message:t.data.info})}})}),console.log(this.passwdForm.password),this.dialogFormVisible=!1},modifyLimit:function(){var e=this,t=new URLSearchParams;t.append("modUserId",this.username),t.append("role",this.value),l.a.post("/user/modifyRole",t).then(function(t){console.log(t.data),1===t.data.code?(e.$alert("修改权限成功","修改权限",{confirmButtonText:"确定",callback:function(s){e.$message({type:"success",message:t.data.info})}}),e.getUserInfo()):e.$alert("修改权限失败","修改权限",{confirmButtonText:"确定",callback:function(s){e.$message({type:"error",message:t.data.info})}})}),console.log(this.value),this.dialogLimitVisible=!1}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"UserManage"},[s("el-col",{staticClass:"hidden-sm-and-down",staticStyle:{height:"100px"},attrs:{xl:3,lg:3,sm:1}}),e._v(" "),s("el-col",{staticClass:"UserManage",attrs:{xl:18,lg:18,sm:24,md:22,xs:24}},[s("el-card",{staticClass:"bgc colorhead"},[s("el-row",{attrs:{type:"flex",justify:"center",gutter:5}},[s("el-col",{attrs:{xs:12,sm:10,md:8,lg:6,xl:6}},[s("el-tag",[e._v("用户总人数 ："+e._s(e.allUserNum))])],1),e._v(" "),s("el-col",{attrs:{xs:20,sm:20,md:16,lg:12,xl:12}},[s("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:e.proportion,color:"rgba(66, 185, 131, 0.8)"}})],1)],1)],1),e._v(" "),s("el-card",{staticClass:"bgc"},[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",[s("el-table",{staticClass:"user-table",staticStyle:{width:"100%"},attrs:{data:e.allInfo,stripe:"",border:"",height:"700"}},[s("el-table-column",{attrs:{type:"index"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userid",label:"用户名",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"flag",label:"用户身份",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-row",{attrs:{type:"flex",justify:"right",gutter:20}},[s("el-col",[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",plain:""},on:{click:function(s){e.getUseridLimit(t.row)}}},[e._v("修改权限")])],1),e._v(" "),s("el-col",[s("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-edit-outline",plain:""},on:{click:function(s){e.getUseridPasswd(t.row)}}},[e._v("修改密码")])],1)],1)]}}])})],1)],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.passwdForm}},[s("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth}},[s("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入密码",clearable:""},model:{value:e.passwdForm.password,callback:function(t){e.$set(e.passwdForm,"password",t)},expression:"passwdForm.password"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.modifyPasswd}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改权限",visible:e.dialogLimitVisible},on:{"update:visible":function(t){e.dialogLimitVisible=t}}},[e._v("\n    更改权限为：  "),s("el-select",{attrs:{placeholder:"请选择",value:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.classUser,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogLimitVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.modifyLimit}},[e._v("确 定")])],1)],1)],1),e._v(" "),s("el-col",{staticClass:"hidden-sm-and-down",staticStyle:{height:"100px"},attrs:{xl:3,lg:3,sm:1}})],1)},staticRenderFns:[]};var r=s("VU/8")(o,i,!1,function(e){s("lS0y"),s("FxH1")},"data-v-78244e30",null);t.default=r.exports},FxH1:function(e,t){},lS0y:function(e,t){}});
//# sourceMappingURL=12.3bd33313a5bf8c96b767.js.map