webpackJsonp([10],{"/WuF":function(t,e){},FvRJ:function(t,e){},"K+Z1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o={name:"BaiDuMap",props:{height:{type:String,default:function(){return"50 vh"}},width:{type:String,default:function(){return"100%"}},className:{type:String,default:function(){return"baiDuMap"}},pointData:{type:Array,default:function(){return[{latitude:31.910911111111112,longitude:118.8920008888889,label:"当前位置"}]}}},mounted:function(){var t=this;this.$nextTick(function(){t.initMap(t.pointData)})},data:function(){return{map:"",mapPoints:[]}},methods:{initMap:function(t){var e=this;this.$nextTick(function(){e.map=new BMap.Map("allmap");var a=[];t.forEach(function(t){a.push(new BMap.Point(t.longitude,t.latitude))}),e.map.enableScrollWheelZoom(),e.map.centerAndZoom(a[0],15);var n=function(t,a,n){for(var i=-1,o=0;o<e.mapPoints.length;o++)if(e.mapPoints[o].lat==n.point.lat&&e.mapPoints[o].lng==n.point.lng){i=o;break}-1!=i&&e.mapPoints.splice(i,1),e.map.removeOverlay(n),e.map.setViewport(e.mapPoints)},i=function(a){if(0===a.status){for(var i=0;i<a.points.length;i++){var o=new BMap.Marker(a.points[i]),s=new BMap.Label(t[i].label,{offset:new BMap.Size(20,-10)}),l=new BMap.ContextMenu;o.setLabel(s),o.addContextMenu(l),l.addItem(new BMap.MenuItem("删除此标记",n.bind(o))),e.map.addOverlay(o),o.addContextMenu(l)}a.points.forEach(function(t){-1===e.mapPoints.indexOf(t)&&e.mapPoints.push(t)}),e.map.setViewport(e.mapPoints)}};setTimeout(function(){(new BMap.Convertor).translate(a,1,5,i)})})},addPointArray:function(t){var e=this,a=[];t.forEach(function(t){a.push(new BMap.Point(t.longitude,t.latitude))});var n=function(t,a,n){for(var i=-1,o=0;o<e.mapPoints.length;o++)if(e.mapPoints[o].lat==n.point.lat&&e.mapPoints[o].lng==n.point.lng){i=o;break}-1!=i&&e.mapPoints.splice(i,1),e.map.removeOverlay(n),e.map.setViewport(e.mapPoints)},o=function(a){if(0===a.status){for(var o=0;o<a.points.length;o++){var s=new BMap.Marker(a.points[o]),l=new BMap.Label(t[o].label,{offset:new BMap.Size(20,-10)}),r=new BMap.ContextMenu;-1===i()(e.mapPoints).indexOf(i()(a.points[o]))&&(e.mapPoints.push(a.points[o]),s.setLabel(l),s.addContextMenu(r),r.addItem(new BMap.MenuItem("删除此标记",n.bind(s))),e.map.addOverlay(s),s.addContextMenu(r))}e.map.setViewport(e.mapPoints)}};setTimeout(function(){(new BMap.Convertor).translate(a,1,5,o)})}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"}},[e("div",{class:this.className,style:{height:this.height,width:this.width},attrs:{id:"allmap"}})])},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(t){a("hWIM")},"data-v-1d29b264",null).exports,r=a("vLgD"),p={name:"DeviceMap",components:{BaiDuMap:l},data:function(){return{deviceInfo:[]}},mounted:function(){this.getDeviceList()},methods:{handleEdit:function(t,e){var a=[];a.push(e),this.$refs.map.addPointArray(a)},getDeviceList:function(){var t=this;r.a.get("/user/getDevices").then(function(e){var a=e.data;1==a.code&&(a.data.forEach(function(e){var a=new Object;a.latitude=e.latitude,a.longitude=e.longitude,a.label=e.devname,a.address=e.address,a.devEUI=e.devEUI,t.deviceInfo.push(a)}),console.log("设备地图",a))})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-container",staticStyle:{height:"100%"}},[a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{lg:14,xl:14,md:14,sm:24}},[a("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设备地图")])]),t._v(" "),a("div",{staticClass:"text item"},[a("bai-du-map",{ref:"map",attrs:{height:"520px"}})],1)])],1),t._v(" "),a("el-col",{attrs:{lg:10,xl:10,md:10,sm:24}},[a("el-card",{staticClass:"devTable",staticStyle:{width:"100%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deviceInfo,align:"center"}},[a("el-table-column",{attrs:{prop:"devEUI",label:"设备EUi"}}),t._v(" "),a("el-table-column",{attrs:{prop:"label",label:"设备名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"地址",prop:"address"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("显示\n            ")])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(p,d,!1,function(t){a("/WuF"),a("FvRJ")},"data-v-32b7bf00",null);e.default=u.exports},hWIM:function(t,e){}});
//# sourceMappingURL=10.cac938837ed33d4cf622.js.map